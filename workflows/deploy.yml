# .github/workflows/deploy.yml
name: Deploy to NCP Server
on:
  push:
    branches: [ main ]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Deploy to NCP VM via SSH
      uses: appleboy/ssh-action@master
      with:
        host: ${{ secrets.NCP_HOST }}
        username: ${{ secrets.NCP_USERNAME }}
        key: ${{ secrets.NCP_SSH_KEY }}
        script: |
          apt-get update
          apt-get install python3-pip git -y
          
          # ğŸš¨ 'PII-Guardian'ì„ íŒ€ì´ ì •í•œ í´ë” ì´ë¦„ìœ¼ë¡œ ë°”ê¾¸ì„¸ìš”
          cd /root
          git clone https://github.com/${{ github.repository }}.git PII-Guardian || true
          
          # ğŸš¨ ì—¬ê¸°ë„ ìœ„ì™€ ë˜‘ê°™ì´ ë°”ê¾¸ì„¸ìš”
          cd /root/PII-Guardian
          git pull
          
          pip3 install -r requirements.txt
          echo "âœ… ë°°í¬ ì„±ê³µ!"